var v=(n,i,o)=>new Promise((d,s)=>{var x=u=>{try{l(o.next(u))}catch(y){s(y)}},g=u=>{try{l(o.throw(u))}catch(y){s(y)}},l=u=>u.done?d(u.value):Promise.resolve(u.value).then(x,g);l((o=o.apply(n,i)).next())});import{a as L,g as J,c as R,S as Q,I as U,b as B,_ as K,d as X,e as Y,p as Z,s as ee,o as te,f as ae,u as ne,h as se,B as re}from"./index.e2bea90b.module.js";import{x as le,R as e,I as ce,B as h,b as ie,f as C,d as V,r as p,P as oe,T as S,S as A,h as ue,a as de}from"./vendor.1c49cccd.module.js";const me=(n,i)=>new Promise((o,d)=>{le.createOrder({desc:i!=null?i:`Thanh to\xE1n cho ${L.app.title}`,item:[],amount:n+Number(J(s=>s.template.shippingFee)),success:s=>v(void 0,null,function*(){console.log("Thanh to\xE1n th\xE0nh c\xF4ng:",s)}),fail:s=>{console.log("L\u1ED7i thanh to\xE1n:",s),d(s)}})}),Ee=[{name:"detail",label:"S\u1ED1 nh\xE0, t\xEAn \u0111\u01B0\u1EDDng",type:"text",placeholder:"Nh\u1EADp s\u1ED1 nh\xE0, t\xEAn \u0111\u01B0\u1EDDng",errorMessage:"H\xE3y nh\u1EADp \u0111\u1ECBa ch\u1EC9 c\u1EE5 th\u1EC3 c\u1EE7a b\u1EA1n",isValidate:!0},{name:"city",label:"T\u1EC9nh, th\xE0nh ph\u1ED1",type:"select",placeholder:"Ch\u1ECDn t\u1EC9nh, th\xE0nh ph\u1ED1...",isValidate:!1},{name:"district",label:"Qu\u1EADn (huy\u1EC7n)",type:"select",placeholder:"Ch\u1ECDn qu\u1EADn, huy\u1EC7n...",isValidate:!1},{name:"ward",label:"Ph\u01B0\u1EDDng (x\xE3)",type:"select",placeholder:"Ch\u1ECDn ph\u01B0\u1EDDng, x\xE3...",isValidate:!1}],he=({store:n,type:i="standard",handleOnClick:o=()=>{},hasRightSide:d=!0,hasBorderBottom:s=!0,customRightSide:x,className:g})=>e.createElement("div",{key:n.id,className:R("flex flex-row items-center justify-between w-full",s&&" border-b",g&&g),onClick:o,role:"button"},e.createElement("div",{className:"flex flex-row items-center"},e.createElement("div",{className:"w-auto flex-none"},e.createElement("img",{src:n.logoStore,alt:"product",className:" w-9 h-9 object-cover rounded-full bg-white"})),e.createElement("div",{className:" p-3 pr-0"},e.createElement("div",{className:"line-clamp-2 text-sm font-medium break-words"},n.nameStore),i==="standard"&&e.createElement("span",{className:" pt-1 font-semibold text-sm text-gray-500"},Q[n.type]))),d&&(x||e.createElement(ce,{size:20,icon:"zi-chevron-right",className:" text-zinc-500"}))),pe=({id:n,pathImg:i,nameProduct:o,salePrice:d,quantity:s,handleOnClick:x})=>e.createElement("div",{className:"w-full flex flex-row items-center justify-between gap-1 border border-[#E4E8EC] rounded-lg overflow-hidden h-24 p-2 mt-2 bg-white",onClick:()=>x(n),role:"button"},e.createElement("div",{className:"flex flex-row items-center gap-1"},e.createElement("div",{className:"flex-none w-20 rounded-lg overflow-hidden"},e.createElement(U,{src:i,alt:"image product",ratio:1})),e.createElement(h,{p:0,m:0,className:" flex-none relative w-5 h-5 rounded-full bg-slate-100"},e.createElement("div",{className:" absolute top-1/2 -translate-y-1/2 w-full text-center text-xs text-blue-700 "},s)),e.createElement(h,{m:0,className:"flex-none text-slate-500"},"x"),e.createElement("div",null,e.createElement("div",{className:"line-clamp-2 text-sm break-words"},o))),e.createElement("span",{className:" pt-1 font-semibold text-sm"},e.createElement("span",{className:" font-normal text-xs"},"\u0111"),B(d))),{Option:I}=A,xe=ie({key:"locationVn",get:()=>K(()=>import("./location.16c1c74a.module.js"),[]).then(n=>n.default)}),Ne=()=>{const n=C(X),i=C(Y),o=C(Z),d=C(ee),s=V(te),x=V(ae),g=ne(),l=C(xe),[u,y]=p.exports.useState(l[0]),[z,F]=p.exports.useState(l[0].districts[0]),[fe,H]=p.exports.useState(l[0].districts[0].wards[0]),[N,T]=p.exports.useState(l[0].districts[0].id),[P,_]=p.exports.useState(l[0].districts[0].wards[0].id),[O,w]=p.exports.useState(null),[G,j]=p.exports.useState(!1),[f,W]=p.exports.useState("GHN"),q=t=>v(void 0,null,function*(){t.preventDefault(),yield me(i)}),M=t=>{s(!0),x({productId:t,isUpdate:!0})},D=(t,a)=>v(void 0,null,function*(){if(f!=="Pickup"){j(!0);try{const m=yield(yield fetch("https://dev-online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/fee",{method:"POST",headers:{"Content-Type":"application/json",Token:"93cb4daa-150f-11f0-95d0-0a92b8726859",ShopId:"196359"},body:JSON.stringify({from_district_id:227,from_ward_code:"07927",service_id:53321,service_type_id:null,to_district_id:t,to_ward_code:a,height:10,length:20,weight:500,width:15,insurance_value:5e4,cod_failed_amount:0,coupon:null,items:[{name:"Demo Product",quantity:1,height:10,weight:500,length:20,width:15}]})})).json();m.code===200?w(m.data.total):w(null)}catch(c){console.error("GHN Fee Error:",c),w(null)}finally{j(!1)}}}),$=t=>{let a=l,c,m;switch(t.name){case"city":a=l,c=u.id,m=r=>{const b=Number(r)-1>-1?Number(r)-1:0,E=l[b].districts[0],k=E.wards[0];y(l[b]),F(E),T(E.id),H(k),_(k.id),f==="GHN"&&D(E.id,k.id)};break;case"district":a=u.districts,c=N,m=r=>{const b=u.districts.find(E=>E.id===r);if(b){const E=b.wards[0];F(b),T(r),H(E),_(E.id),f==="GHN"&&D(r,E.id)}};break;case"ward":a=z.wards,c=P,m=r=>{_(r),N&&f==="GHN"&&D(N,r)};break;default:a=l,c=void 0,m=()=>{};break}return{listOptions:a,value:c,handleOnSelect:m}};return p.exports.useEffect(()=>{g({title:"\u0110\u01A1n \u0111\u1EB7t h\xE0ng",type:"secondary"}),se("secondary"),f==="GHN"?D(N,P):w(0)},[f]),e.createElement(oe,null,n&&e.createElement("div",{className:" mb-[80px]"},e.createElement(h,{m:0,p:4,className:" bg-white"},e.createElement(he,{store:d,hasRightSide:!1,hasBorderBottom:!1,type:"order"})),e.createElement(h,{mx:3,mb:2},n.listOrder.map(t=>{const a=o.find(c=>c.id===t.id);return e.createElement(pe,{pathImg:a.imgProduct,nameProduct:a.nameProduct,salePrice:a.salePrice,quantity:t.order.quantity,key:a.id,id:t.id,handleOnClick:c=>M(c)})})),e.createElement(h,{m:4,flex:!0,flexDirection:"row",justifyContent:"space-between"},e.createElement("span",{className:" text-base font-medium"},"\u0110\u01A1n h\xE0ng"),e.createElement("span",{className:" text-base font-medium text-primary"},B(i),"\u0111")),e.createElement(h,{m:0,px:4,className:" bg-white"},e.createElement(S,{size:"large",bold:!0,className:" border-b py-3 mb-0"},"Ph\u01B0\u01A1ng th\u1EE9c giao h\xE0ng"),e.createElement("div",{className:"py-3 border-b"},e.createElement(A,{value:f,onChange:t=>{W(t),t==="Pickup"?w(0):D(N,P)}},e.createElement(I,{value:"GHN",title:"GHN (Giao t\u1EADn n\u01A1i)"}),e.createElement(I,{value:"Pickup",title:"T\u1EF1 \u0111\u1EBFn l\u1EA5y h\xE0ng"})))),e.createElement(h,{m:0,px:4,className:" bg-white"},e.createElement(S,{size:"large",bold:!0,className:" border-b py-3 mb-0"},"\u0110\u1ECBa ch\u1EC9 giao h\xE0ng"),Ee.map(t=>{const{listOptions:a,value:c,handleOnSelect:m}=$(t);return e.createElement("div",{key:t.name,className:R("py-3",t.name!=="ward"&&"border-b")},e.createElement(S,{size:"large",bold:!0,className:"after:content-['_*'] after:text-primary after:align-middle"},t.label),e.createElement(h,{className:"relative",m:0},t.type==="select"?e.createElement(A,{id:t.name,placeholder:t.placeholder,name:t.name,value:c,onChange:r=>{m(r)}},a==null?void 0:a.map(r=>e.createElement(I,{key:r.id,value:r.id,title:r.name}))):e.createElement(ue,{placeholder:"Nh\u1EADp s\u1ED1 nh\xE0, t\xEAn \u0111\u01B0\u1EDDng",clearable:!0})))})),(O!==null||G)&&e.createElement(h,{m:4,flex:!0,flexDirection:"row",justifyContent:"space-between"},e.createElement("span",{className:"text-base font-medium"},"Ph\xED ship"),e.createElement("span",{className:"text-base font-medium text-primary"},G?"\u0110ang t\xEDnh...":`${B(O||0)}\u0111`)),e.createElement(re,{zIndex:99},e.createElement(de,{htmlType:"submit",fullWidth:!0,className:" bg-primary text-white rounded-lg h-12",onClick:q},"\u0110\u1EB7t h\xE0ng")),e.createElement(S,{className:"p-4 text-center"},`\u0110\u1EB7t h\xE0ng \u0111\u1ED3ng ngh\u0129a v\u1EDBi vi\u1EC7c b\u1EA1n \u0111\u1ED3ng \xFD quan t\xE2m 
              ${d.nameStore} 
              \u0111\u1EC3 nh\u1EADn tin t\u1EE9c m\u1EDBi`)))};export{Ne as default};
