import t from'./../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import n from"../../token.js";import{APIS as e}from"../../../constants.js";import{__generator as r}from'./../../../external/tslib/tslib.es6.js';var s,o=(s=t((function(s){var o,a;return r(this,(function(i){switch(i.label){case 0:return[4,n.getAccessToken()];case 1:return o=i.sent(),a="id,name,user_id_by_oa,picture",s&&(a="".concat(a,".type(").concat(s,")")),[4,fetch("".concat(e.GET_USER_INFO,"?fields=").concat(a),{headers:{access_token:o||""}}).then(function(){var n=t((function(t){var n,e,s;return r(this,(function(r){switch(r.label){case 0:return[4,t.json()];case 1:return[2,{id:null==(s=r.sent())?void 0:s.id,name:null==s?void 0:s.name,avatar:null==s||null===(n=s.picture)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.url,idByOA:null==s?void 0:s.user_id_by_oa}]}}))}));return function(t){return n.apply(this,arguments)}}())];case 2:return[2,i.sent()]}}))})),function(t){return s.apply(this,arguments)});export{o as default};
